
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light dark">
    <title>PEP 700 – Additional Fields for the Simple API for Package Indexes | peps.python.org</title>
    <link rel="shortcut icon" href="../_static/py.png">
    <link rel="canonical" href="https://peps.python.org/pep-0700/">
    <link rel="stylesheet" href="../_static/style.css" type="text/css">
    <link rel="stylesheet" href="../_static/mq.css" type="text/css">
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" media="(prefers-color-scheme: light)" id="pyg-light">
    <link rel="stylesheet" href="../_static/pygments_dark.css" type="text/css" media="(prefers-color-scheme: dark)" id="pyg-dark">
    <link rel="alternate" type="application/rss+xml" title="Latest PEPs" href="https://www.python.org/dev/peps/peps.rss">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <meta name="description" content="Python Enhancement Proposals (PEPs)">
</head>
<body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-sun-half" viewBox="0 0 24 24" pointer-events="all">
    <title>Following system colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="9"></circle>
      <path d="M12 3v18m0-12l4.65-4.65M12 14.3l7.37-7.37M12 19.6l8.85-8.85"></path>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected dark colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24" pointer-events="all">
    <title>Selected light colour scheme</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
</svg>
    <script>

        document.documentElement.dataset.colour_scheme = localStorage.getItem("colour_scheme") || "auto"
    </script>
    <section id="pep-page-section">
        <header>
            <h1>Python Enhancement Proposals</h1>
            <ul class="breadcrumbs">
                <li><a href="https://www.python.org/" title="The Python Programming Language">Python</a> &raquo; </li>
                <li><a href="../pep-0000/">PEP Index</a> &raquo; </li>
                <li>PEP 700</li>
            </ul>
            <button id="colour-scheme-cycler" onClick="setColourScheme(nextColourScheme())">
                <svg aria-hidden="true" class="colour-scheme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-dark"><use href="#svg-moon"></use></svg>
                <svg aria-hidden="true" class="colour-scheme-icon-when-light"><use href="#svg-sun"></use></svg>
                <span class="visually-hidden">Toggle light / dark / auto colour theme</span>
            </button>
        </header>
        <article>
            <section id="pep-content">
<h1 class="page-title">PEP 700 – Additional Fields for the Simple API for Package Indexes</h1>
<dl class="rfc2822 field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd">Paul Moore &lt;p.f.moore&#32;&#97;t&#32;gmail.com&gt;</dd>
<dt class="field-even">PEP-Delegate<span class="colon">:</span></dt>
<dd class="field-even">Donald Stufft &lt;donald&#32;&#97;t&#32;stufft.io&gt;</dd>
<dt class="field-odd">Discussions-To<span class="colon">:</span></dt>
<dd class="field-odd"><a class="reference external" href="https://discuss.python.org/t/pep-700-additional-fields-for-the-simple-api-for-package-indexes/20177">Discourse thread</a></dd>
<dt class="field-even">Status<span class="colon">:</span></dt>
<dd class="field-even">Draft</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd">Standards Track</dd>
<dt class="field-even">Topic<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="/topic/packaging/">Packaging</a></dd>
<dt class="field-odd">Created<span class="colon">:</span></dt>
<dd class="field-odd">21-Oct-2022</dd>
<dt class="field-even">Post-History<span class="colon">:</span></dt>
<dd class="field-even"><a class="reference external" href="https://discuss.python.org/t/pep-700-additional-fields-for-the-simple-api-for-package-indexes/20177" title="Discourse thread">21-Oct-2022</a></dd>
</dl>
<hr class="docutils" />
<section id="contents">
<details><summary>Table of Contents</summary><ul class="simple">
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#versions">Versions</a></li>
<li><a class="reference internal" href="#additional-file-information">Additional file information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faq">FAQ</a><ul>
<li><a class="reference internal" href="#why-not-add-this-data-to-the-html-api-as-well">Why not add this data to the HTML API as well?</a></li>
<li><a class="reference internal" href="#does-this-imply-that-the-html-api-is-obsolete">Does this imply that the HTML API is obsolete?</a></li>
<li><a class="reference internal" href="#why-not-allow-other-date-formats">Why not allow other date formats?</a></li>
<li><a class="reference internal" href="#what-if-file-sizes-are-too-big-for-a-json-number">What if file sizes are too big for a JSON number?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>
</details></section>
<section id="abstract">
<h2><a class="toc-backref" href="#abstract" role="doc-backlink">Abstract</a></h2>
<p><a class="pep reference internal" href="/pep-0691" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a> defined a JSON form for the “Simple Repository API”. This allowed
clients to more easily query the data that was previously only available in
HTML, as defined in <a class="pep reference internal" href="/pep-0503" title="PEP 503 – Simple Repository API">PEP 503</a>.</p>
<p>This proposal adds three <em>optional</em> additional fields to the JSON form, which
allow it to be used in place of PyPI’s <a class="reference external" href="https://warehouse.pypa.io/api-reference/json.html">JSON API</a>
in a number of situations.</p>
<ul class="simple">
<li>A field to allow retrieval of a list of all the published versions of a project.</li>
<li>Fields containing the size and upload time for a project file.</li>
</ul>
</section>
<section id="specification">
<h2><a class="toc-backref" href="#specification" role="doc-backlink">Specification</a></h2>
<p>The proposal adds three new fields to the JSON form of the “project detail”
pages in the simple index, located at the URL <code class="docutils literal notranslate"><span class="pre">/&lt;project&gt;/</span></code>. These fields are
<em>not</em> available in the HTML form of the page.</p>
<p>An index MUST provide all of the specified information, for all projects and
files, if it provides any of it. In other words, while indexes may choose to
only support the base <a class="pep reference internal" href="/pep-0691" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a>, if they choose to support this PEP they must
do so completely.</p>
<p>In addition, as a technical point, this PEP reserves all field names in the JSON
form beginning with an underscore as available for private use by indexes - no
future PEP will assign a standardised meaning to such names.</p>
<section id="versions">
<h3><a class="toc-backref" href="#versions" role="doc-backlink">Versions</a></h3>
<p>An additional key, <code class="docutils literal notranslate"><span class="pre">versions</span></code> MAY be present at the top level, in addition to
the keys <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">files</span></code> and <code class="docutils literal notranslate"><span class="pre">meta</span></code> defined in <a class="pep reference internal" href="/pep-0691" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a>. This key, if
present, MUST contain a list of version strings conforming to <a class="pep reference internal" href="/pep-0440" title="PEP 440 – Version Identification and Dependency Specification">PEP 440</a>, which
list all of the project versions uploaded for this project.</p>
<p>All of the files listed in the <code class="docutils literal notranslate"><span class="pre">files</span></code> key MUST be associated with one of the
versions in the <code class="docutils literal notranslate"><span class="pre">versions</span></code> key, if present. The <code class="docutils literal notranslate"><span class="pre">versions</span></code> key MAY contain
versions with no associated files.</p>
</section>
<section id="additional-file-information">
<h3><a class="toc-backref" href="#additional-file-information" role="doc-backlink">Additional file information</a></h3>
<p>The elements of the <code class="docutils literal notranslate"><span class="pre">files</span></code> key MAY contain two additional sub-keys, <code class="docutils literal notranslate"><span class="pre">size</span></code>
and <code class="docutils literal notranslate"><span class="pre">upload_time</span></code>. The <code class="docutils literal notranslate"><span class="pre">size</span></code> field MUST contain an integer which is the
file size in bytes, and the <code class="docutils literal notranslate"><span class="pre">upload_time</span></code> field MUST contain a valid ISO 8601
date/time string, in the format <code class="docutils literal notranslate"><span class="pre">yyyy-mm-ddThh:mm:ss.ffffffZ</span></code>, which
represents the time the file was uploaded to the index. As indicated by the
<code class="docutils literal notranslate"><span class="pre">Z</span></code> suffix, the upload time MUST use the UTC timezone.</p>
</section>
</section>
<section id="faq">
<h2><a class="toc-backref" href="#faq" role="doc-backlink">FAQ</a></h2>
<section id="why-not-add-this-data-to-the-html-api-as-well">
<h3><a class="toc-backref" href="#why-not-add-this-data-to-the-html-api-as-well" role="doc-backlink">Why not add this data to the HTML API as well?</a></h3>
<p>It would be possible to add the data to the HTML API, but the vast majority of
consumers for this data are likely to be currently getting it from the PyPI JSON
API, and so will already be expecting to parse JSON. Traditional consumers of
the HTML API have never needed this data previously.</p>
</section>
<section id="does-this-imply-that-the-html-api-is-obsolete">
<h3><a class="toc-backref" href="#does-this-imply-that-the-html-api-is-obsolete" role="doc-backlink">Does this imply that the HTML API is obsolete?</a></h3>
<p>No. The FAQ of <a class="pep reference internal" href="/pep-0691" title="PEP 691 – JSON-based Simple API for Python Package Indexes">PEP 691</a> was clear that the HTML API is not being deprecated,
and this PEP does not change that position. However, clients wishing to access
the new data introduced by this PEP will need to use the JSON API to get it. And
indexes wanting to provide it will need to serve the JSON format.</p>
</section>
<section id="why-not-allow-other-date-formats">
<h3><a class="toc-backref" href="#why-not-allow-other-date-formats" role="doc-backlink">Why not allow other date formats?</a></h3>
<p>The ISO 8601 standard is complex, and there seems little value in requiring
clients to deal with that. The standard library <code class="docutils literal notranslate"><span class="pre">datetime</span></code> module provides
methods to parse ISO 8601 strings, but it is possible that users may want to
access index data <em>without</em> using Python (for example, piping the output of
<code class="docutils literal notranslate"><span class="pre">curl</span></code> into <code class="docutils literal notranslate"><span class="pre">jq</span></code>). Having a single, well-defined format makes this easier,
and doesn’t have any significant disadvantages.</p>
</section>
<section id="what-if-file-sizes-are-too-big-for-a-json-number">
<h3><a class="toc-backref" href="#what-if-file-sizes-are-too-big-for-a-json-number" role="doc-backlink">What if file sizes are too big for a JSON number?</a></h3>
<p>The JSON standard does not specify how numbers are to be interpreted. Python can
read and write arbitrary-length integers in a JSON file, so this should not be
an issue for code written in Python. Non-Python implementations may need to take
care to handle large integers correctly, but this is not expected to be a
significant problem.</p>
</section>
</section>
<section id="copyright">
<h2><a class="toc-backref" href="#copyright" role="doc-backlink">Copyright</a></h2>
<p>This document is placed in the public domain or under the
CC0-1.0-Universal license, whichever is more permissive.</p>
</section>
</section>
<hr class="docutils" />
<p>Source: <a class="reference external" href="https://github.com/python/peps/blob/main/pep-0700.rst">https://github.com/python/peps/blob/main/pep-0700.rst</a></p>
<p>Last modified: <a class="reference external" href="https://github.com/python/peps/commits/main/pep-0700.rst">2022-10-21 12:38:03 GMT</a></p>

        </article>
        <nav id="pep-sidebar">
            <h2>Contents</h2>
            <ul>
<li><a class="reference internal" href="#abstract">Abstract</a></li>
<li><a class="reference internal" href="#specification">Specification</a><ul>
<li><a class="reference internal" href="#versions">Versions</a></li>
<li><a class="reference internal" href="#additional-file-information">Additional file information</a></li>
</ul>
</li>
<li><a class="reference internal" href="#faq">FAQ</a><ul>
<li><a class="reference internal" href="#why-not-add-this-data-to-the-html-api-as-well">Why not add this data to the HTML API as well?</a></li>
<li><a class="reference internal" href="#does-this-imply-that-the-html-api-is-obsolete">Does this imply that the HTML API is obsolete?</a></li>
<li><a class="reference internal" href="#why-not-allow-other-date-formats">Why not allow other date formats?</a></li>
<li><a class="reference internal" href="#what-if-file-sizes-are-too-big-for-a-json-number">What if file sizes are too big for a JSON number?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#copyright">Copyright</a></li>
</ul>

            <br>
            <a id="source" href="https://github.com/python/peps/blob/main/pep-0700.rst">Page Source (GitHub)</a>
        </nav>
    </section>
    <script src="../_static/colour_scheme.js"></script>
    <script src="../_static/wrap_tables.js"></script>
</body>
</html>